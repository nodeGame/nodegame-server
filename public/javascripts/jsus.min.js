/**
 * # JSUS: JavaScript UtilS. 
 * Copyright(c) 2012 Stefano Balietti
 * MIT Licensed
 * 
 * Collection of general purpose javascript functions. JSUS helps!
 * 
 * 
 * JSUS is designed to be modular and easy to extend. 
 * 
 * Just use: 
 * 
 *         JSUS.extend(myClass);
 * 
 * to extend the functionalities of JSUS. All the methods of myClass 
 * are immediately added to JSUS, and a reference to myClass is stored
 * in JSUS._classes.
 * 
 * MyClass can be either of type Object or Function.
 * 
 * JSUS can also extend other objects. Just pass a second parameter:
 * 
 * 
 *         JSUS.extend(myClass, mySecondClass);
 * 
 * and mySecondClass will receive all the methods of myClass. In this case,
 * no reference of myClass is stored.
 * 
 * To get a copy of one of the registered JSUS libraries
 * 
 *  	var myClass = JSUS.require('myClass');
 * 
 * JSUS come shipped in with a default set of libraries
 * 
 * 1. OBJ
 * 2. ARRAY
 * 3. TIME
 * 4. EVAL
 * 5. DOM
 * 6. RANDOM
 * 7. PARSE
 * 
 * Documentation
 * 
 * Automatic documentation for all libraries can be generated with the command
 * 
 * ```javascript
 * node bin/make.js doc
 * ```
 *  
 * Build
 * 
 * Create your customized build of JSUS.js using the make file in the bin directory
 * 
 * ```javascript
 * node make.js build // Full build, about 20Kb minified
 * node make.js build -l obj,array -o jsus-oa.js // about 12Kb minified
 * ```
 */
(function(e){var t=e.JSUS={};t._classes={},t.log=function(e){console.log(e)},t.extend=function(e,n){if("object"!=typeof e&&"function"!=typeof e)return n;if("undefined"==typeof n){var n=n||this;if("function"==typeof e){var r=e.toString();r=r.substr("function ".length),r=r.substr(0,r.indexOf("("))}else var r=e.constructor||e.__proto__.constructor;r&&(this._classes[r]=e)}for(var i in e)e.hasOwnProperty(i)&&(typeof n[i]!="object"?n[i]=e[i]:t.extend(e[i],n[i]));return e.prototype&&t.extend(e.prototype,n.prototype||n),n},t.require=t.get=function(e){return"undefined"==typeof t.clone?(t.log("JSUS.clone not found. Cannot continue."),!1):"undefined"==typeof e?t.clone(t._classes):"undefined"==typeof t._classes[e]?(t.log("Could not find class "+e),!1):t.clone(t._classes[e])},t.isNodeJS=function(){return"undefined"!=typeof module&&"undefined"!=typeof module.exports&&"function"==typeof require},t.isNodeJS()&&(require("./lib/obj"),require("./lib/array"),require("./lib/time"),require("./lib/eval"),require("./lib/dom"),require("./lib/random"),require("./lib/parse"),require("./lib/fs"))})("undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports:window),function(e){function t(){}t.getQueryString=function(e){var t=window.location.search.substring(1);if("undefined"==typeof e)return t;var n=t.split("&");for(var r=0;r<n.length;r++){var i=n[r].split("=");if(i[0]===e)return unescape(i[1])}return!1},t.tokenize=function(t,n,r){if(!t)return;if(!n||!n.length)return[t];r=r||{};var i="[";e.each(n,function(e){e===" "&&(e="\\s"),i+=e}),i+="]+";var s=new RegExp(i);return t.split(s,r.limit)},e.extend(t)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(JSUS){function COMPATIBILITY(){}COMPATIBILITY.compatibility=function(){var support={};try{Object.defineProperty({},"a",{enumerable:!1,value:1}),support.defineProperty=!0}catch(e){support.defineProperty=!1}try{eval("({ get x(){ return 1 } }).x === 1"),support.setter=!0}catch(err){support.setter=!1}try{var value;eval("({ set x(v){ value = v; } }).x = 1"),support.getter=!0}catch(err){support.getter=!1}return support},JSUS.extend(COMPATIBILITY)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(e){function t(){}var n=null;"undefined"!=typeof e.compatibility&&(n=e.compatibility()),t.equals=function(e,n){if("undefined"==typeof e||"undefined"==typeof n)return e===n;if(e===null||n===null)return e===n;if("number"==typeof e&&isNaN(e)&&"number"==typeof n&&isNaN(n))return isNaN(e)&&isNaN(n);var r={number:"",string:"","boolean":""};if(typeof e in r)return typeof n in r?e===n:!1;if(typeof n in{number:"",string:"","boolean":""})return!1;for(var i in e)if(e.hasOwnProperty(i)){if("undefined"==typeof n[i]&&"undefined"!=typeof e[i])return!1;if(!n[i]&&e[i])return!1;switch(typeof e[i]){case"function":if(e[i].toString()!==n[i].toString())return!1;default:if(!t.equals(e[i],n[i]))return!1}}for(i in n)if(n.hasOwnProperty(i)){if("undefined"==typeof e[i]&&"undefined"!=typeof n[i])return!1;if(!e[i]&&n[i])return!1}return!0},t.isEmpty=function(e){if("undefined"==typeof e)return!0;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.size=t.getListSize=function(e){if(!e)return 0;if("number"==typeof e)return 0;if("string"==typeof e)return 0;var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t},t._obj2Array=function(e,n,r,i){if("object"!=typeof e)return[e];if(r){i="undefined"!=typeof i?i:1;if(i>r)return[e];i+=1}var s=[];for(var o in e)e.hasOwnProperty(o)&&("object"==typeof e[o]?s=s.concat(t._obj2Array(e[o],n,r,i)):(n&&s.push(o),s.push(e[o])));return s},t.obj2Array=function(e,n){return t._obj2Array(e,!1,n)},t.obj2KeyedArray=t.obj2KeyArray=function(e,n){return t._obj2Array(e,!0,n)},t.keys=t.objGetAllKeys=function(e,n,r){if(!e)return[];n="number"==typeof n&&n>=0?n:0,r="number"==typeof r&&r>=0?r:0;var i=[];for(var s in e)e.hasOwnProperty(s)&&(i.push(s),r<n&&"object"==typeof e[s]&&(i=i.concat(t.objGetAllKeys(e[s],r+1))));return i},t.implode=t.implodeObj=function(e){if(!e)return[];var t=[];for(var n in e)if(e.hasOwnProperty(n)){var r={};r[n]=e[n],t.push(r)}return t},t.clone=function(e){if(!e)return e;if("number"==typeof e)return e;if("string"==typeof e)return e;if("boolean"==typeof e)return e;if(e===NaN)return e;if(e===Infinity)return e;var r;"function"==typeof e?r=function(){return e.apply(r,arguments)}:r=Object.prototype.toString.call(e)==="[object Array]"?[]:{};for(var i in e){var s;e[i]&&"object"==typeof e[i]?Object.prototype.toString.call(e[i])==="[object Array]"?s=e[i].slice(0):s=t.clone(e[i]):s=e[i];if(e.hasOwnProperty(i))r[i]=s;else if(n&&n.defineProperty)Object.defineProperty(r,i,{value:s,writable:!0,configurable:!0});else try{Object.defineProperty(r,i,{value:s,writable:!0,configurable:!0})}catch(o){r[i]=s}}return r},t.join=function(e,n){var r=t.clone(e);if(!n)return r;for(var i in r)r.hasOwnProperty(i)&&"undefined"!=typeof n[i]&&("object"==typeof n[i]?r[i]=t.join(r[i],n[i]):r[i]=n[i]);return r},t.merge=function(e,n){if(!e&&!n)return!1;if(!e)return t.clone(n);if(!n)return t.clone(e);var r=t.clone(e);for(var i in n)n.hasOwnProperty(i)&&(n[i]&&"object"==typeof n[i]?("object"!=typeof r[i]&&(Object.prototype.toString.call(n[i])==="[object Array]"?r[i]=[]:r[i]={}),r[i]=t.merge(r[i],n[i])):r[i]=n[i]);return r},t.mixin=function(e,t){if(!e&&!t)return;if(!e)return t;if(!t)return e;for(var n in t)e[n]=t[n]},t.mixout=function(e,t){if(!e&&!t)return;if(!e)return t;if(!t)return e;for(var n in t)e[n]||(e[n]=t[n])},t.mixcommon=function(e,t){if(!e&&!t)return;if(!e)return t;if(!t)return e;for(var n in t)e[n]&&(e[n]=t[n])},t.mergeOnKey=function(e,n,r){var i=t.clone(e);if(!n||!r)return i;for(var s in n)if(n.hasOwnProperty(s)){if(!i[s]||"object"!=typeof i[s])i[s]={};i[s][r]=n[s]}return i},t.subobj=function(e,n){if(!e)return!1;var r={};if(!n)return r;n instanceof Array||(n=[n]);for(var i=0;i<n.length;i++){var s=n[i];t.hasOwnNestedProperty(s,e)&&t.setNestedValue(s,t.getNestedValue(s,e),r)}return r},t.skim=function(e,n){if(!e)return!1;var r=t.clone(e);if(!n)return r;n instanceof Array||(n=[n]);for(var i=0;i<n.length;i++)t.deleteNestedKey(n[i],r);return r},t.setNestedValue=function(n,r,i){if(!n)return e.log("Cannot set value of undefined property","ERR"),!1;i="object"==typeof i?i:{};var s=n.split(".");if(s.length===1)return i[n]=r,i;var o=s.shift();return i[o]=t.setNestedValue(s.join("."),r,i[o]),i},t.getNestedValue=function(e,n){if(!n)return;var r=e.split(".");if(r.length===1)return n[e];var i=r.shift();return t.getNestedValue(r.join("."),n[i])},t.deleteNestedKey=function(e,n){if(!n)return;var r=e.split(".");if(r.length===1)return delete n[e],!0;var i=r.shift();return"undefined"==typeof n[i]?!1:t.deleteNestedKey(r.join("."),n[i])},t.hasOwnNestedProperty=function(e,n){if(!n)return!1;var r=e.split(".");if(r.length===1)return n.hasOwnProperty(e);var i=r.shift();return t.hasOwnNestedProperty(r.join("."),n[i])},t.split=function(t,n){if(!t)return;if(!n||"object"!=typeof t[n])return e.clone(t);var r=[],i=e.clone(t);i[n]={};var s=function(t){for(var o in t){var u=e.clone(i);t.hasOwnProperty(o)&&("object"==typeof t[o]?r=r.concat(s(t[o])):(u[n][o]=t[o],r.push(u)))}return r};return s(t[n])},e.extend(t)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(e){function t(){}t.write=function(t,n){if(!t)return;if(!n)return;var r=!e.isNode(n)||!e.isElement(n)?document.createTextNode(n):n;return t.appendChild(r),r},t.writeln=function(e,n,r){if(!e)return;var i=this.addBreak(e,r);return n?t.write(e,n):i},t.sprintf=function(t,n,r){var i,s,o,u,a,f,l,c={};if(!n)return document.createTextNode(t);r=r||document.createElement("span");for(var h in n)if(n.hasOwnProperty(h)){if(u===-1)continue;switch(h[0]){case"%":u=t.indexOf(h),f=u+h.length,a=t.indexOf(h,f);if(a===-1){e.log("Error. Could not find closing key: "+h);continue}c[u]=h;break;case"@":t=t.replace(h,escape(n[h]));break;case"!":t=t.replace(h,n[h]);break;default:e.log("Identifier not in [!,@,%]: "+h[0])}}if(!e.size(c))return document.createTextNode(t);l=e.keys(c).sort(function(e,t){return e-t}),a=0;for(var p=0;p<l.length;p++)h=c[l[p]],u=t.indexOf(h),a!==u-1&&r.appendChild(document.createTextNode(t.substring(a,u))),f=u+h.length,a=t.indexOf(h,f),o=W.getElement("span",null,n[h]),i=t.substring(f,a),o.appendChild(document.createTextNode(i)),r.appendChild(o),a+=h.length;return a!==t.length&&r.appendChild(document.createTextNode(t.substring(a))),r},t.isNode=function(e){return typeof Node=="object"?e instanceof Node:typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.nodeName=="string"},t.isElement=function(e){return typeof HTMLElement=="object"?e instanceof HTMLElement:typeof e=="object"&&e.nodeType===1&&typeof e.nodeName=="string"},t.getElement=function(e,t,n){var r=document.createElement(e);return"undefined"!=typeof t&&(r.id=t),this.addAttributes2Elem(r,n)},t.addElement=function(e,t,n,r){var i=this.getElement(e,n,r);return t.appendChild(i)},t.addAttributes2Elem=function(t,n){if(!t||!n)return t;if("object"!=typeof n)return t;var r=["id","label"];for(var i in n)n.hasOwnProperty(i)&&(e.in_array(i,r)?i==="id"&&(t.id=n[i]):t.setAttribute(i,n[i]));return t},t.populateSelect=function(e,t){if(!e||!t)return;for(var n in t)if(t.hasOwnProperty(n)){var r=document.createElement("option");r.value=t[n],r.appendChild(document.createTextNode(n)),e.appendChild(r)}},t.removeChildrenFromNode=function(e){if(!e)return!1;while(e.hasChildNodes())e.removeChild(e.firstChild);return!0},t.insertAfter=function(e,t){t.insertBefore(e,t.nextSibling)},t.generateUniqueId=function(t){function r(t){var r=!0;while(r)for(var i=0;i<n.length;i++){r=n[i].document.getElementById(t);if(r){t=""+t+"_"+e.randomInt(0,1e3);break}}return t}var n=[window];return window.frames&&(n=n.concat(window.frames)),r(t+"_"+e.randomInt(0,1e7))},t.getBlankPage=function(){var e=document.createElement("html");return e.appendChild(document.createElement("body")),e},t.getButton=function(e,t,n){var r=document.createElement("button");return r.id=e,r.appendChild(document.createTextNode(t||"Send")),this.addAttributes2Elem(r,n)},t.addButton=function(e,t,n,r){var i=this.getButton(t,n,r);return e.appendChild(i)},t.getFieldset=function(e,t,n){var r=this.getElement("fieldset",e,n),i=document.createElement("Legend");return i.appendChild(document.createTextNode(t)),r.appendChild(i),r},t.addFieldset=function(e,t,n,r){var i=this.getFieldset(t,n,r);return e.appendChild(i)},t.getTextInput=function(e,t){var n=document.createElement("input");return"undefined"!=typeof e&&(n.id=e),n.setAttribute("type","text"),this.addAttributes2Elem(n,t)},t.addTextInput=function(e,t,n){var r=this.getTextInput(t,n);return e.appendChild(r)},t.getTextArea=function(e,t){var n=document.createElement("textarea");return"undefined"!=typeof e&&(n.id=e),this.addAttributes2Elem(n,t)},t.addTextArea=function(e,t,n){var r=this.getTextArea(t,n);return e.appendChild(r)},t.getCanvas=function(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");return r?(n.id=e,this.addAttributes2Elem(n,t)):(alert("Canvas is not supported"),!1)},t.addCanvas=function(e,t,n){var r=this.getCanvas(t,n);return e.appendChild(r)},t.getSlider=function(e,t){var n=document.createElement("input");return n.id=e,n.setAttribute("type","range"),this.addAttributes2Elem(n,t)},t.addSlider=function(e,t,n){var r=this.getSlider(t,n);return e.appendChild(r)},t.getRadioButton=function(e,t){var n=document.createElement("input");return n.id=e,n.setAttribute("type","radio"),this.addAttributes2Elem(n,t)},t.addRadioButton=function(e,t,n){var r=this.getRadioButton(t,n);return e.appendChild(r)},t.getLabel=function(e,t,n,r){if(!e)return!1;var i=document.createElement("label");return i.id=t,i.appendChild(document.createTextNode(n)),"undefined"==typeof e.id&&(e.id=this.generateUniqueId()),i.setAttribute("for",e.id),this.addAttributes2Elem(i,r),i},t.addLabel=function(e,t,n,r,i){if(!e||!t||!r)return!1;var s=this.getLabel(t,n,r,i);return e.insertBefore(s,t),s},t.getSelect=function(e,t){return this.getElement("select",e,t)},t.addSelect=function(e,t,n){return this.addElement("select",e,t,n)},t.getIFrame=function(e,t){var t={name:e};return this.getElement("iframe",e,t)},t.addIFrame=function(e,t,n){var r=this.getIFrame(t,n);return e.appendChild(r)},t.addBreak=function(e,t){var n=t||"br",r=document.createElement(n);return e.appendChild(r)},t.getDiv=function(e,t){return this.getElement("div",e,t)},t.addDiv=function(e,t,n){return this.addElement("div",e,t,n)},t.addCSS=function(t,n,r,i){var t=t||document.head||document.body||document;return t?(i=i||{},i=e.merge(i,{rel:"stylesheet",type:"text/css",href:n}),this.addElement("link",t,r,i)):!1},t.addJS=function(t,n,r,i){var t=t||document.head||document.body||document;return t?(i=i||{},i=e.merge(i,{charset:"utf-8",type:"text/javascript",src:n}),this.addElement("script",t,r,i)):!1},t.highlight=function(e,t){if(!e)return;switch(t){case"OK":var n="green";break;case"WARN":var n="yellow";break;case"ERR":var n="red";break;default:if(t[0]==="#")var n=t;else var n="red"}return this.addBorder(e,n)},t.addBorder=function(e,t,n,r){if(!e)return;var t=t||"red",i=i||"5px",r=r||"solid",s={border:i+" "+r+" "+t};return this.style(e,s)},t.style=function(e,n){if(!e||!n)return;if(!t.isElement(e))return;var r="";for(var i in n)r+=i+": "+n[i]+"; ";return e.setAttribute("style",r)},t.removeClass=function(e,t){if(!e||!t)return;var n="/(?:^|s)"+t+"(?!S)/",r=e.className=e.className.replace(n,"");return e},t.addClass=function(e,t){if(!e||!t)return;return t instanceof Array&&(t=t.join(" ")),"undefined"==typeof e.className?e.className=t:e.className+=" "+t,e},e.extend(t)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(e){function t(){}Array.prototype.filter||(Array.prototype.filter=function(e){"use strict";if(this===void 0||this===null)throw new TypeError;var t=Object(this),n=t.length>>>0;if(typeof e!="function")throw new TypeError;var r=[],i=arguments[1];for(var s=0;s<n;s++)if(s in t){var o=t[s];e.call(i,o,s,t)&&r.push(o)}return r}),t.isArray=function(e){return e?Object.prototype.toString.call(e)==="[object Array]":!1},t.seq=function(t,n,r,i){if("number"!=typeof t)return!1;if(t===Infinity)return!1;if("number"!=typeof n)return!1;if(n===Infinity)return!1;if(t===n)return[t];if(r===0)return!1;if(!e.in_array(typeof r,["undefined","number"]))return!1;r=r||1,i=i||function(e){return e};var s=t,o=[];if(t<n)while(s<=n)o.push(i(s)),s+=r;else while(s>=n)o.push(i(s)),s-=r;return o},t.each=function(e,t,n){if("object"!=typeof e)return!1;if(!t)return!1;n=n||this;var r,i=e.length;for(r=0;r<i;r++)t.call(n,e[r]);return!0},t.map=function(){if(arguments.length<2)return;var n=Array.prototype.slice.call(arguments),r=n.shift(),i=n[0];if(!t.isArray(r)){e.log("ARRAY.map() the first argument must be an array. Found: "+r);return}var s=[],o=undefined;for(var u=0;u<r.length;u++)n[0]=r[u],o=i.apply(this,n),"undefined"!=typeof o&&s.push(o);return s},t.removeElement=function(t,n){if("undefined"==typeof t||!n)return!1;if("object"==typeof t)var r=e.equals;else var r=function(e,t){return e===t};for(var i=0;i<n.length;i++)if(r(t,n[i]))return n.splice(i,1);return!1},t.inArray=t.in_array=function(t,n){if(!n)return!1;var r=e.equals;for(var i=0;i<n.length;i++)if(r.call(this,t,n[i]))return!0;return!1},t.getNGroups=function(e,n){return t.getGroupsSizeN(e,Math.floor(e.length/n))},t.getGroupsSizeN=function(e,t){var n=e.slice(0),r=n.length,i=n.length,s=[],o,u,a=[],f=0;for(o=0;o<i;o++)u=Math.floor(Math.random()*r),f>=t&&(s.push(a),f=0,a=[]),a.push(n[u]),n.splice(u,1),r=n.length,f++;return a.length>0&&s.push(a),s},t._latinSquare=function(t,n,r){r="undefined"==typeof r?!0:r;if(t===n&&!r)return!1;var i=[],s=[];for(var o=0;o<t;o++)i[o]=o;var u=null,a=0,f=t,l=[];r||(f=t-1);for(o=0;o<n;o++){do u=e.randomInt(a,f);while(e.in_array(u,l));l.push(u),u==1?(s[o]=i.slice(u),s[o].push(0)):s[o]=i.slice(u).concat(i.slice(0,u))}return s},t.latinSquare=function(e,n){return n||(n=e),!e||e<0||n<0?!1:(n>e&&(n=e),t._latinSquare(e,n,!0))},t.latinSquareNoSelf=function(e,n){return n||(n=e-1),!e||e<0||n<0?!1:(n>e&&(n=e-1),t._latinSquare(e,n,!1))},t.generateCombinations=function(t,n){function r(e,t){var n=[];for(var r=0;r<e.length;r++)n.push(t[e[r]]);return n}var i=t.length,s=[];for(var o=0;o<n;o++)s.push(o);var u=[];for(var o=i-n;o<i;o++)u.push(o);while(!e.equals(s,u)){callback(r(s,t));var o=n-1;while(s[o]==i-n+o)o-=1;s[o]+=1;for(var a=o+1;a<n;a++)s[a]=s[o]+a-o}return r(s,t)},t.matchN=function(e,n,r){if(!e)return;if(!n)return e;var i=[],s=e.length,o=[];for(var u=0;u<s;u++){var a=e.slice(0);a.splice(u,1),r&&(a=t.arrayDiff(a,o));var f=t.getNRandom(a,n);o=o.concat(f),f.splice(0,0,e[u]),i.push(f),f=[]}return i},t.rep=function(t,n){if(!t)return;if(!n)return t.slice(0);if(n<1){e.log("times must be greater or equal 1","ERR");return}var r=1,i=t.slice(0);for(;r<n;r++)i=i.concat(t);return i},t.stretch=function(n,r){if(!n)return;if(!r)return n.slice(0);if("number"==typeof r){if(r<1){e.log("times must be greater or equal 1","ERR");return}r=t.rep([r],n.length)}var i=[];for(var s=0;s<n.length;s++){var o=r[s%r.length];for(var u=0;u<o;u++)i.push(n[s])}return i},t.arrayIntersect=function(t,n){return t.filter(function(t){return e.in_array(t,n)})},t.arrayDiff=function(t,n){return t.filter(function(t){return!e.in_array(t,n)})},t.shuffle=function(e){if(!e)return;var t=e.slice(0),n=e.length-1,r,i;for(var s=n;s>0;s--)r=Math.floor(Math.random()*(s+1)),i=t[r],t[r]=t[s],t[s]=i;return t},t.getNRandom=function(e,n){return t.shuffle(e).slice(0,n)},t.distinct=function(e){var n=[];return e?(t.each(e,function(e){t.in_array(e,n)||n.push(e)}),n):n},t.transpose=function(e){if(!e)return;var n,r,i,s,o=[];n=e.length||0,r=t.isArray(e[0])?e[0].length:0;if(n===0||r===0)return o;for(i=0;i<r;i++){o[i]=[];for(s=0;s<n;s++)o[i][s]=e[s][i]}return o},e.extend(t)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(JSUS){function EVAL(){}EVAL.eval=function(str,context){if(!str)return;context=context||this;var func=function(str){return eval(str)};return func.call(context,str)},JSUS.extend(EVAL)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(e){function t(){}t.random=function(e,t){e="undefined"==typeof e?0:e,t="undefined"==typeof t?0:t;if(e===t)return e;if(t<e){var n=e;e=t,t=n}return Math.random()*(t-e)+e},t.randomInt=function(e,n){return e===n?e:Math.floor(t.random(e,n)+1)},e.extend(t)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(e){function t(){}t.getDate=t.getFullDate=function(){var e=new Date,t=e.getUTCDate()+"-"+(e.getUTCMonth()+1)+"-"+e.getUTCFullYear()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+" "+e.getMilliseconds();return t},t.getTime=function(){var e=new Date,t=e.getHours()+":"+e.getMinutes()+":"+e.getSeconds();return t},t.parseMilliseconds=function(e){if("number"!=typeof e)return;var t=[],n=e/1e3;t[4]=n;var r=n%60;t[3]=Math.floor(r);var n=n/60,i=n%60;t[2]=Math.floor(i);var n=n/60,s=n%24;t[1]=Math.floor(s);var n=n/24,o=n;return t[1]=Math.floor(o),t},e.extend(t)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS),function(e){function i(){}if(!e.isNodeJS())return e.log("Cannot load JSUS.FS outside of Node.JS."),!1;var t=require("resolve"),n=require("path"),r=require("fs");i.resolveModuleDir=function(e,n){if(!e)return!1;var r=t.sync(e,{basedir:n||__dirname}),i=r.indexOf(e)+e.length;return r.substr(0,i)+"/"},i.deleteIfExists=function(e){if(!n.existsSync(e))return!1;var t=r.lstatSync(e);return t.isDirectory()?r.rmdir(e,function(e){if(e)throw e}):r.unlink(e,function(e){if(e)throw e}),!0},i.cleanDir=function(t,i,s){if(!t)return e.log("You must specify a directory to clean."),!1;var o=i?function(e){return n.extname(e)===i}:function(e){return!0};return t[t.length]!=="/"&&(t+="/"),r.readdir(t,function(n,r){if(n)return e.log(n),!1;r.filter(o).forEach(function(n){e.deleteIfExists(t+n)});if(s)return s(null)}),!0},i.copyFromDir=function(t,i,o,u){return t?i?(r.readdir(t,function(r,a){if(r)throw e.log(r),new Error;for(var f in a){if(o&&n.extname(a[f])!==o)continue;s(t+a[f],i+a[f])}if(u)return u(null)}),!0):(e.log("You must specify a destination directory"),!1):(e.log("You must specify a source directory"),!1)};var s=function(e,t,n){var i,s;return i=r.createReadStream(e),s=r.createWriteStream(t),i.on("end",function(){if(n)return n(null)}),i.pipe(s)};e.extend(i)}("undefined"!=typeof JSUS?JSUS:module.parent.exports.JSUS)